<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Project Oberon emulator in JavaScript and Java</title>
<style>
body { font-family: Verdana, Arial, Helvetica, sans-serif; }
dt {font-weight: bold; }
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.min.css" />
</head>
<body>
</head>
<body>
<a class="github-fork-ribbon" href="https://github.com/schierlm/OberonEmulator" title="Fork me on GitHub">Fork me on GitHub</a>
<h1>Project Oberon emulator in JavaScript and Java</h1>
<p>Here you can find <a href="mailto:schierlm@gmx.de">my</a> emulators for
<a href="http://projectoberon.com/">Project Oberon</a> in JavaScript and Java.</p>

<p style="margin-right: 5em">Note that the JavaScript emulator does not support
the original SPI (which is used for network and SD-card) and keyboard interfaces, but
a simplified "paravirtualized" interface for keyboard, clipboard, sd-card, and
power management instead, and therefore requires
<a href="https://github.com/schierlm/OberonEmulator/blob/master/JS/CREATING-IMAGES.markdown">patched images</a>;
images that support the <a href="https://github.com/schierlm/OberonEmulator/blob/master/hardware-enumerator.md">Hardware Enumerator</a>
should work unchanged. All these interfaces are also supported by the Java
emulator (and others can be disabled) to make development easier.</p>

<h2>JavaScript emulator</h2>

<p>Needs a recent browser with JavaScript <i>Canvas</i> and <i>Typed Arrays</i> support.
You also need a fairly fast PC or some patience during the boot process.</p>

<p>An <a href="js-offline-emu.zip">Offline version</a> is also available. It does not include
any disk images. You will need to run the online version and save a disk image to your local
disk first.</p>
	
<p>Note that clipboard access from JavaScript is severely restricted and very browser dependent.
In recent Chrome and Chromium Edge versions full clipboard integration should work (if you give it
permission), in Firefox unfortunately only writing to the clipboard works.

So, as a fallback option, paravirtual clipboard synchronizes into a text field you can show
or hide (showing it disables the JavaScript Clipboard API).
You can copy and paste from there like normal.</p>

<p>
<form id="emuform" style="display:none;">
	<select name="size">
		<option>800×400</option>
		<option>800×450</option>
		<option>800×600</option>
		<option>1024×512</option>
		<option selected>1024×576</option>
		<option>1024×768</option>
		<option>1280×1024</option>
		<option>1344×576</option>
		<option>1344×768</option>
		<option>1400×1050</option>
		<option>1600×900</option>
		<option>1600×1200</option>
		<option>1920×1080</option>
	</select>
	<select name="image">
		<option selected>MinimalDiskImage</option>
		<option>FullDiskImage</option>
		<option>VanillaDiskImage</option>
		<option>ExtendedOberonDiskImage</option>
		<option>IntegratedOberonDiskImage</option>
		<option>BootFromSerialLine</option>
		<option>ColorDiskImage</option>
		<option>FullWithRescueDiskImage</option>
		<option>DebuggableDiskImage</option>
	</select>
	| RAM:
	<select name="mem">
		<option value="1">1 MB</option>
		<option value="2">2 MB</option>
		<option value="4">4 MB</option>
		<option value="8">8 MB</option>
		<option value="16">16 MB</option>
		<option value="32">32 MB</option>
		<option value="64">64 MB</option>
	</select>
	| Shared VRAM:
	<select name="dismem">
		<option value="96">96 KB</option>
		<option value="256">256 KB</option>
		<option value="384">384 KB</option>
		<option value="512">512 KB</option>
		<option value="1024">1 MB</option>
		<option value="2048">2 MB</option>
	</select>
	<input type="Button" value="Start" onclick="startEmu()"><br>
	<label><input id="oldemu" type="radio" name="flavor" value="old">Old emulator (ugly)</label>
	<label><input type="radio" name="flavor" value="js" checked>Pure JavaScript emulator</label>
	<label><input id="wasmemu" type="radio" name="flavor" value="wasm" disabled>JavaScript+WebAssembly emulator (faster)</label>
	<br><label><input id="jitemu" type="radio" name="flavor" value="jit">JavaScript JIT emulator (requires Cache Coherence support in images)</label>
	<h3>Short description of available disk images [with last update dates]:</h3>
	<dl>
	<dt>MinimalDiskImage [2022-08-14]</dt><dd>A small (~100KB) disk image containing only the necessary files to start Oberon. No compiler, no tools. So
	  all you can use it for is editing Text files.</dd>
	<dt>FullDiskImage [2022-08-14]</dt><dd>Full content of the original Project Oberon 2013, with some patches to make it more convenient in the emulator.</dd>
	<dt>VanillaDiskImage [2022-03-18]</dt><dd>Full content of the Origina Project Oberon 2013, with only minimal patches to make it work in the JS emulator.</dd>
	<dt>ExtendedOberonDiskImage [2022-03-18, v1.10]</dt><dd>Image based on Andreas Pirklbauer's <a href="https://github.com/andreaspirklbauer/Oberon-extended">Extended Oberon</a></dd>
	<dt>IntegratedOberonDiskImage [2020-11-29]</dt><dd>Image based on Charles Perkin's <a href="https://github.com/io-core/io">Integrated Oberon</a></dd>
	<dt>BootFromSerialLine [2021-01-19]</dt><dd>Small image that only boots from a serial line (used with a serial line to another Oberon system)</dd>
	<dt>ColorDiskImage [2022-08-14]</dt><dd>Image patched to support 16 colors.</dd>
	<dt>FullWithRescueDiskImage [2022-08-14]</dt><dd>Same as the image without <b>WithRescue</b>, but it includes a <a href="https://github.com/schierlm/Oberon2013Modifications/tree/master/RescueSystem">rescue system</a> to fix and recompile in case you break the boot.</dd>
	<dt>DebuggableDiskImage [2022-08-14]</dt><dd>Image that includes a <a href="https://github.com/schierlm/Oberon2013Modifications/tree/master/KernelDebugger">Kernel debugger</a></dd>
	</dl>
	<p>Images built in <b>March 2022</b> or later also work in other boards/emulators that support the Hardware Enumerator (or are 100% compatible to the original board).</p>
</form>
<script type="text/javascript">
try {
	(function() {
		var c = document.createElement("canvas");
		c.width=10; c.height=10;
		c.getContext("2d").getImageData(0,0,2,2).data;
		new Int32Array(10);
	})();
	document.getElementById("emuform").style.display="";
	if ('WebAssembly' in window) {
		document.getElementById("wasmemu").disabled = false;
	}
} catch (e) {
	document.write("Your browser does not support the required JavaScript features.");
}

function startEmu() {
	if (document.getElementById("oldemu").checked && document.forms.emuform.image.value.indexOf("Color") == 0) {
		alert("Old emulator does not support color!")
		return;
	}
	var imageName = document.forms.emuform.image.value;
	if (document.getElementById("oldemu").checked) {
		var size = document.forms.emuform.size.value;
		document.location.href="old_emu.html#"+imageName+","+size.split("×").join(",");
		return;
	}
	var page = document.getElementById("wasmemu").checked ? "emu-wasm.html" : (document.getElementById("jitemu").checked ? "emu-jit.html" : "emu.html");
	var size = document.forms.emuform.size.value.split("×");
	document.location.href = page + "?image=" + imageName +
		"&mem=" + document.forms.emuform.mem.value +
		"&dismem=" + document.forms.emuform.dismem.value +
		"&width=" + size[0] + "&height=" + size[1];
}
</script>
<noscript>
Your browser does not support JavaScript or it is disabled.
</noscript>
</p>

<h2>Java emulator</h2>

<p><a href="java.zip">Download here</a> (3.57 MB)</p>

<p>This emulator includes three different sets of disk images. First, the
images also used in the JavaScript emulator. Second it contains a set
of "compatible" images, which should work on most other emulators and/or boards
(if they are 100% compatible or provide a hardware enumerator). And last but not
least a set of "java" disk images that include all advanced features like different
color depths or memory layouts. These images can also be used with HostFS so that the
filesystem content is written to a directory of the host.</p>

<h2>Oberon Source files</h2>
	
<p>The <a href="oberonsource.zip">Oberon sources (for the images of both JavaScript and Java emulator)</a> (241 KB) are
also available. Files that are the same in all sets are contained in the root
directory, while files that are different can be found in "Compatible", "JS"
and "Bigmem" subdirectories. The directory "ExperimentalOberonTools" contains
tools used to build the Experimental Oberon disk image for the JavaScript
emulator.</p>

<p>There is also an <a href="/OberonXref/ProjectOberon2013/">Interactive Source Xref</a> available for all
the original ("vanilla") Project Oberon files.</p>
</body>
</html>
