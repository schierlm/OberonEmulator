<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Project Oberon emulator in JavaScript and Java</title>
<style>
body { font-family: Verdana, Arial, Helvetica, sans-serif; }
dt {font-weight: bold; }
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.min.css" />
</head>
<body>
</head>
<body>
<a class="github-fork-ribbon" href="https://github.com/schierlm/OberonEmulator" title="Fork me on GitHub">Fork me on GitHub</a>
<h1>Project Oberon emulator in JavaScript and Java</h1>
<p>Here you can find <a href="mailto:schierlm@gmx.de">my</a> emulators for
<a href="http://projectoberon.com/">Project Oberon</a> in JavaScript and Java.</p>

<p style="margin-right: 5em">Note that the JavaScript emulator does not support
the original SPI (which is used for network and SD-card) and keyboard interfaces, but
a simplified "paravirtualized" interface for keyboard, clipboard, sd-card, and
power management instead. All these interfaces are also supported by the Java
emulator (and others can be disabled) to make development easier.</p>

<h2>JavaScript emulator</h2>

<p>Needs a recent browser with JavaScript <i>Canvas</i> and <i>Typed Arrays</i> support.
You also need a fairly fast PC or some patience during the boot process.</p>
	
<p>Note that clipboard access from JavaScript is severely restricted and very browser dependent.
So, I took the easy route and made paravirtual clipboard synchronize into a text field you can show
or hide. You can copy and paste from there like normal.</p>

<p>
<form id="emuform" style="display:none;">
	<select name="size">
		<option>800×400</option>
		<option>800×450</option>
		<option>800×600</option>
		<option>1024×512</option>
		<option selected>1024×576</option>
		<option>1024×768</option>
	</select>
	<select name="image">
		<option selected>MinimalDiskImage</option>
		<option>FullDiskImage</option>
		<option>VanillaDiskImage</option>
		<option>ExtendedOberonDiskImage</option>
		<option>IntegratedOberonDiskImage</option>
		<option>BootFromSerialLine</option>
		<option>ColorDiskImage</option>
		<option>UnicodeDiskImage</option>
		<option>FullBigmemDiskImage</option>
		<option>ColorBigmemDiskImage</option>
		<option>FullWithRescueDiskImage</option>
		<option>FullBigmemWithRescueDiskImage</option>
		<option>ModificationsDiskImage</option>
		<option>DebuggableDiskImage</option>
	</select>
	<input type="Button" value="Start" onclick="startEmu()"><br>
	<label><input id="oldemu" type="radio" name="flavor" value="old">Old emulator (ugly)</label>
	<label><input type="radio" name="flavor" value="js" checked>Pure JavaScript emulator</label>
	<label><input id="wasmemu" type="radio" name="flavor" value="wasm" disabled>JavaScript+WebAssembly emulator (faster)</label>
	<p>Most disk images have last been rebuilt in April 2020.</p>
	<h3>Short description of available disk images:</h3>
	<dl>
	<dt>MinimalDiskImage</dt><dd>A small (~100KB) disk image containing only the necessary files to start Oberon. No compiler, no tools. So
	  all you can use it for is editing Text files.</dd>
	<dt>FullDiskImage</dt><dd>Full content of the original Project Oberon 2013, with some patches to make it more convenient in the emulator.</dd>
	<dt>VanillaDiskImage</dt><dd>Full content of the Origina Project Oberon 2013, with only minimal patches to make it work in the JS emulator.</dd>
	<dt>ExtendedOberonDiskImage</dt><dd>Image based on Andreas Pirklbauer's <a href="https://github.com/andreaspirklbauer/Oberon-extended">Extended Oberon</a></dd>
	<dt>IntegratedOberonDiskImage</dt><dd>Image based on Charles Perkin's <a href="https://github.com/io-core/io">Integrated Oberon</a></dd>
	<dt>BootFromSerialLine</dt><dd>Small image that only boots from a serial line (used with a serial line to another Oberon system)</dd>
	<dt>ColorDiskImage</dt><dd>Image patched to support 16 colors.</dd>
	<dt>UnicodeDiskImage</dt><dd>Image patched to support Unicode characters.</dd>
	<dt>*BigmemDiskImage</dt><dd>Same as the images without <b>Bigmen</b>, but using a 4MB address space instead of 1MB.</dd>
	<dt>*WithRescueDiskImage</dt><dd>Same as the images without <b>WithRescue</b>, but these include a <a href="https://github.com/schierlm/Oberon2013Modifications/tree/master/RescueSystem">rescue system</a> to fix and recompile in case you break the boot.</dd>
	<dt>ModificationsDiskImage</dt><dd>Image based on my <a href="https://github.com/schierlm/Oberon2013Modifications">Oberon 2013 Modifications</a></dd>
	<dt>DebuggableDiskImage</dt><dd>Image that includes a <a href="https://github.com/schierlm/Oberon2013Modifications/tree/master/RescueSystem">Kernel debugger</a></dd>
	</dl>
</form>
<script type="text/javascript">
try {
	(function() {
		var c = document.createElement("canvas");
		c.width=10; c.height=10;
		c.getContext("2d").getImageData(0,0,2,2).data;
		new Int32Array(10);
	})();
	document.getElementById("emuform").style.display="";
	if ('WebAssembly' in window) {
		document.getElementById("wasmemu").disabled = false;
	}
} catch (e) {
	document.write("Your browser does not support the required JavaScript features.");
}

function startEmu() {
	if (document.getElementById("oldemu").checked && document.forms.emuform.image.value.indexOf("Color") == 0) {
		alert("Old emulator does not support color!")
		return;
	}
	var imageName = document.forms.emuform.image.value;
	if (document.getElementById("oldemu").checked) {
		var size = document.forms.emuform.size.value;
		document.location.href="old_emu.html#"+imageName+","+size.split("×").join(",");
		return;
	}
	var page= document.getElementById("wasmemu").checked ? "emu-wasm.html" : "emu.html";
	var size = document.forms.emuform.size.value.split("×");
	document.location.href = page + "?image=" + imageName +
		"&width=" + size[0] + "&height=" + size[1];
}
</script>
<noscript>
Your browser does not support JavaScript or it is disabled.
</noscript>
</p>

<h2>Java emulator</h2>

<p><a href="java.zip">Download here</a> (598 KB)</p>

<p>This emulator includes three different sets of disk images. First, the
images also used in the JavaScript emulator. Second it contains a set
of "compatible" images: The original BootLoad.Bin (and one that uses a 4GB
address space) and a disk image that does not
use any of the paravirtualized features and can therefore be used with
<a href="https://github.com/pdewacht/oberon-risc-emu">Peter De Wachter's Oberon
Emulator</a> or native as well. And last but not least a set of "big" disk and
boot loader images that include all advanced features like color or different
memory layouts. The "big" images can also be used with HostFS so that the
filesystem content is written to a directory of the host.</p>

<h2>Oberon Source files</h2>
	
<p>The <a href="oberonsource.zip">Oberon sources (for the images of both JavaScript and Java emulator)</a> (241 KB) are
also available. Files that are the same in all sets are contained in the root
directory, while files that are different can be found in "Compatible", "JS"
and "Bigmem" subdirectories. The directory "ExperimentalOberonTools" contains
tools used to build the Experimental Oberon disk image for the JavaScript
emulator.</p>

<p>There is also an <a href="/OberonXref/ProjectOberon2013/">Interactive Source Xref</a> available for all
the original ("vanilla") Project Oberon files.</p>
</body>
</html>
